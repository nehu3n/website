---
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<section class="py-20" id="blog">
  <div class="w-full max-w-5xl mx-auto px-4 md:px-8">
    <div class="flex items-center gap-4 mb-20">
      <h2 class="text-3xl font-light tracking-widest text-white whitespace-nowrap">writing</h2>
      <div class="h-[1px] flex-1 bg-zinc-700"></div>
    </div>
    
    <div class="grid gap-12">
      {posts.map((post) => (
        <a href={`/blog/${post.data.slug}`} class="group block border-b border-zinc-800 pb-12 last:border-0 hover:border-zinc-500 transition-colors duration-700">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
            <div class="space-y-4 max-w-2xl">
              <time datetime={new Date(post.data.pubDate).toISOString()} class="text-zinc-600 font-mono text-[10px] uppercase tracking-widest">
                {new Date(post.data.pubDate).toLocaleDateString('en-us', {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric',
                })}
              </time>
              
              <h3 class="text-2xl font-light text-zinc-100 group-hover:text-white transition-colors duration-700">
                {post.data.title}
              </h3>
              
              <p class="text-zinc-500 font-light leading-relaxed group-hover:text-zinc-400 transition-colors duration-700">
                {post.data.description}
              </p>
            </div>
            
            <div class="text-zinc-800 group-hover:text-zinc-100 transition-all duration-700 translate-x-[-10px] group-hover:translate-x-0">
              <svg class="w-8 h-8 font-thin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </div>
          </div>
        </a>
      ))}
    </div>
    
    <div class="mt-20">
      <a 
        href="/blog" 
        class="group inline-flex items-center gap-4 text-zinc-500 hover:text-white transition-all duration-500 font-mono text-xs uppercase tracking-[0.3em]"
      >
        <span>explore archive</span>
        <div class="w-12 h-[1px] bg-zinc-700 group-hover:w-20 group-hover:bg-white transition-all duration-500"></div>
      </a>
    </div>
  </div>
</section>